<div ng-controller="AbscSaisieElevePersonnel" class="saisi-absc">

    <!--Recherche élève-->
    <div class="  left-side" >
        <!-- Bloc recherche élève -->
        <article class="twelve cell eleven-mobile ng-scope" >
            <h2><i18n>viescolaire.utils.students</i18n></h2>

            <!-- Barre de recherche de l'élève -->
            <autocomplete options="structure.eleves.all" ng-change="selectEleve()" ng-model="selected.eleve"></autocomplete>
            <div class="row ng-scope" ng-if="display.showEleveCard">

                <div class="three cell">
                    <img class="avatar" src="/userbook/avatar/[[selected.eleve.id]]">
                </div>

                <div class="nine cell padding-sm">
                    <h2>[[selected.eleve.firstName]] [[selected.eleve.lastName]] - [[selected.eleve.className]]</h2>
                    <p>[[selected.eleve.birthDate]]</p>
                    <div class="row action-item">
                        <a ng-href="/conversation/conversation#/write-mail/[[selected.eleve.id]]" class="twelve cell">
                            <i class="send-mail inline"></i>
                            <i18n>viescolaire.absences.send.message</i18n>
                        </a>
                    </div>
                </div>
            </div>
        </article>

        <!-- Bloc absences de l'élève -->
        <article ng-show="display.showLastAbsences" class="twelve cell eleven-mobile ng-scope">
            <h2><i18n>viescolaire.absences.title.last.absences.entered</i18n></h2>

            <!-- Si des absences sont trouvés -->
            <div ng-show="selected.eleve.absencesToShow.length">
                <div ng-repeat="absenceToShow in selected.eleve.absencesToShow | limitTo:3" class="row" >
                    <div ng-include src="'/viescolaire/public/templates/absences/absc_personnel_show_simple_and_prev.html'"></div>
                </div>
            </div>

            <!-- Si aucune absence n'est trouvé -->
            <div ng-show="!selected.eleve.absencesToShow.length">
                <h2><i18n>viescolaire.absences.no.absence.to.show</i18n></h2>
            </div>

            <button ng-click="showLightboxAllAbsences(true)"><i18n>viescolaire.utils.show.more</i18n></button>
        </article>

    </div>

    <div class="right-side">

        <!-- Saisie des données -->
        <div class="twelve cell card">
            <h3>Saisir une période d'absence</h3>
            <!-- Créneau -->
            <div class="row">
                <label class="two cell" style="font-size: 18px;font-weight: bold;">Créneau</label>
                <div class="ten cell inline-child">
                    <label><i18n>viescolaire.utils.from</i18n> </label>
                    <label >
                        <i class="calendar"></i>
                        <date-picker class="pointer" ng-model="selected.dateDb" ng-change=""></date-picker>
                        <input type="time" ng-model="selected.timeDb" >
                    </label>
                    <label><i18n>viescolaire.utils.to</i18n> </label>
                    <label>
                        <i class="calendar"></i>
                        <date-picker class="pointer" ng-model="selected.dateFn" ng-change=""></date-picker>
                        <input type="time" ng-model="selected.timeFn" >
                    </label>
                </div>
            </div>
            <!-- Motif -->
            <div class="row">
                <label class="two cell" style="font-size: 18px;font-weight: bold;">Motif</label>
                <select class="ten cell">
                    <option value="9">Maladie avec justificatif</option>
                    <option value="28">Hospitalisation</option>
                    <option value="29">Sans motif</option>
                </select>
            </div>

        </div>

        <!-- Affichage calendar -->
        <div class="twelve cell">
            <div class="row" style="height: 500px;">
                <p>...Calendrier...</p>
            </div>
            <div class="row">
                <div class="three cell">

                </div>
                <div class="six cell">
                    <p style="text-align: center">0 conflits</p>
                </div>
                <div class="three cell">
                    <button class="right-magnet">Confirmer</button>
                </div>
            </div>
        </div>


    </div>

    <!-- Lightbox qui affiche toutes les absences -->
    <lightbox show="displayLightboxAllAbsences" on-close="displayLightboxAllAbsences=false">
        <h2><i18n>viescolaire.absences.title.last.absences.entered</i18n></h2>
        <!-- Body affichage des absences -->
        <div ng-show="selected.eleve.absencesToShow.length" class="body-lightbox-last-absence">
            <div ng-repeat="absenceToShow in selected.eleve.absencesToShow" class="row" >
                <div ng-include src="'/viescolaire/public/templates/absences/absc_personnel_show_simple_and_prev.html'"></div>
            </div>
        </div>

        <!-- Footer avec bouton fermer -->
        <button class="right-magnet" ng-click="showLightboxAllAbsences(false)"><i18n>viescolaire.fermer</i18n></button>
    </lightbox>
</div>
