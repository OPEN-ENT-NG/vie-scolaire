<!DOCTYPE html>
<!--
  ~ Copyright (c) Région Hauts-de-France, Département 77, CGI, 2016.
  ~
  ~ This file is part of OPEN ENT NG. OPEN ENT NG is a versatile ENT Project based on the JVM and ENT Core Project.
  ~
  ~ This program is free software; you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation (version 3 of the License).
  ~ For the sake of explanation, any module that communicate over native
  ~ Web protocols, such as HTTP, with OPEN ENT NG is outside the scope of this
  ~ license and could be license under its own terms. This is merely considered
  ~ normal use of OPEN ENT NG, and does not fall under the heading of "covered work".
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  ~
  -->
<div class="row" ng-controller="ReleveController">
    <div class="twelve cell">

        <header class="header-viescolaire" style="padding: 8px;margin-bottom: 20px;background: white;border-radius: 5px;">
            <h1><span class="no-style ng-scope"><i18n>ariane.viescolaire.displayReleveNotes</i18n></span></h1>

            <section style="margin-top:8px;" ng-if="me.type === 'PERSRELELEVE'" class="row">
                <label class="select cell two" ng-hide="searchReleve.eleve===null" style="margin-left:8px">
                    <select ng-model="searchReleve.periode"
                            ng-change="loadReleveNote()"
                            style="border: solid 1px;border-radius: 2px;cursor: pointer;background: transparent;"
                            ng-options="getI18nPeriode(periode) for periode in searchReleve.eleve.classe.periodes.all">
                        <option class="header-opt" value="">
                            [[translate('viescolaire.utils.periode')]]
                        </option>
                    </select>
                </label>
                <a ng-show="dataReleve.devoirs.all.length > 0 && searchReleve.eleve !== null
                && searchReleve.periode !== null" class="print-i" ng-click="getReleve()">
                    &nbsp;  <i class="download"> </i><i18n>print</i18n>
                </a>
            </section>
            <section style="margin-top:8px;" ng-if="me.type === 'ELEVE'" class="row">
                <label class="select cell two" style="margin-left:8px">
                    <select ng-model="searchReleve.periode"
                            ng-change="loadReleveNote()"
                            style="border: solid 1px;border-radius: 2px;cursor: pointer;background: transparent;"
                            ng-options="getI18nPeriode(periode) for periode insearchReleve.eleve.classe.periodes.all">
                        <option class="header-opt" value="">
                            [[translate('viescolaire.utils.periode')]]
                        </option>
                    </select>
                </label>
                <a ng-show="dataReleve.devoirs.all.length > 0 && searchReleve.eleve.classe.periode !== null"
                   class="print-i"
                   ng-click="getReleve()">

                    &nbsp;<i class="download"> </i><i18n>print</i18n>
                </a>
            </section>
        </header>

        <content ng-show="dataReleve.devoirs.all.length > 0">

            <table class="list-view tableReleveEleve tableRelevePadding" navigable>
                <thead>
                <tr>
                    <th class="fontLarge col1ReleveEleve"><i18n>viescolaire.utils.matiere</i18n></th>
                    <th class="fontLarge center"><i18n>evaluations.grade</i18n></th>
                    <th class="fontLarge colMoyenneReleveEleve center"><i18n>average</i18n></th>
                </tr>
                </thead>
                <tbody>
                <tr class="ligneReleve"
                    ng-repeat="matiere in matieres.all ">
                    <td class="col1ReleveEleve">
                        <span class="alignMatiere">[[matiere.name]]</span>
                        <ul>
                            <li ng-repeat="ens in matiere.ens track by ens.id">
                                <span class="nomEnseignant">[[ens.firstName]]. [[ens.name]]</span>
                            </li>
                        </ul>
                    </td>

                    <td class="notesDevoir">
                        <div ng-repeat="devoirReleveNotes in dataReleve.devoirs.all track by $index">
                            <div    class=" alignCenterVertically"
                                    ng-class="{noteDevoir: devoirReleveNotes.id_matiere === matiere.id }">
                                <div ng-if="devoirReleveNotes.id_matiere === matiere.id">
                                    <span class="bold fontXLarge">[[devoirReleveNotes.note]]</span>
                                    <span> / [[devoirReleveNotes.diviseur]]</span>
                                    <span class="releve-coef"
                                          ng-show='devoirReleveNotes.coefficient != null
                                      && devoirReleveNotes.coefficient != 1'>
                                    (<i18n>viescolaire.utils.coef</i18n>. [[devoirReleveNotes.coefficient]])
                                </span>
                                </div>
                                <div class="gradetooltip"
                                     ng-if="devoirReleveNotes.id_matiere === matiere.id && me.type === 'PERSRELELEVE'"
                                     tooltip="[[getFormatedDate(devoirReleveNotes.date)]]<p>[[devoirReleveNotes.name]]<div>[[devoirReleveNotes._sousmatiere_libelle]]</p>[[devoirReleveNotes.appreciation]]"></div>
                                <div class="gradetooltip"
                                     ng-if="me.type === 'ELEVE' && devoirReleveNotes.id_matiere === matiere.id"
                                     tooltip="[[getFormatedDate(devoirReleveNotes.date)]]<br>[[devoirReleveNotes.name]]<div>[[devoirReleveNotes._sousmatiere_libelle]]</div>"></div>
                            </div>
                        </div>
                    </td>
                    <td class="colMoyenneReleveEleve">
                        <div class="noteMoyenne alignCenterVertically">
                            <span class="bold fontXLarge">[[matiere.moyenne]]</span>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>


        </content>
        <content ng-show="dataReleve.devoirs.all.length === 0">
            <h1 style="color: grey;"><i18n>evaluations.no.summary</i18n></h1>
        </content>

    </div>
</div>
