<!--
  ~ Copyright (c) Région Hauts-de-France, Département 77, CGI, 2016.
  ~
  ~ This file is part of OPEN ENT NG. OPEN ENT NG is a versatile ENT Project based on the JVM and ENT Core Project.
  ~
  ~ This program is free software; you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation (version 3 of the License).
  ~ For the sake of explanation, any module that communicate over native
  ~ Web protocols, such as HTTP, with OPEN ENT NG is outside the scope of this
  ~ license and could be license under its own terms. This is merely considered
  ~ normal use of OPEN ENT NG, and does not fall under the heading of "covered work".
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  ~
  -->
<div class="row notes-help">
    <div class="cell twelve legend">
        <h4>
            <i18n>evaluations.evaluation.libre.add</i18n>
        </h4>

        <h2>
            "[[detailCompetence.nom]]"
        </h2>

        <div class="separator"></div>

    </div>
    <div class="cell twelve">
        <!-- Titre -->
        <section class="row twelve-mobile">
            <div class="three cell addDevoirTable__libelle twelve-mobile">
                <i18n>evaluations.test.title</i18n>
                <i class="fa fa-asterisk obligatoire"></i>
            </div>

            <div class="nine cell twelve-mobile">
                <input type="text" class="eleven twelve-mobile" ng-model="evaluationLibre.name">
            </div>
        </section>

        <!-- Description -->
        <section class="row twelve-mobile">
            <div class="three cell addDevoirTable__libelle twelve-mobile">
                <i18n>viescolaire.utils.description</i18n>
            </div>

            <div class="nine cell twelve-mobile">
                <textarea row="4" type="text" ng-model="evaluationLibre.libelle" class="eleven">
                </textarea>
            </div>
        </section>

        <div class="separator"/>


        <section class="row twelve-mobile">
            <!-- Matiére -->
            <div class="three cell addDevoirTable__libelle twelve-mobile">
                <i18n>viescolaire.utils.subject</i18n>
            </div>

            <div class="nine cell twelve-mobile">
                <label class="select eleven twelve-mobile">
                    <select ng-model="evaluationLibre.id_matiere"  ng-options="matiere.id as matiere.name for matiere in EvaluationLibreCharge.matieres ">
                        <option  value="" >[[translate('viescolaire.utils.subject')]]
                        </option>
                    </select>
                </label>
            </div>
        </section>

        <section class="row twelve-mobile">
            <!-- Sous matiere -->
            <div class="three cell addDevoirTable__libelle twelve-mobile">
                <i18n>viescolaire.utils.undersubject</i18n>
            </div>

            <div class="nine cell twelve-mobile">
                <label class="select eleven twelve-mobile" ng-class="{disabled : EvaluationLibreCharge.sousmatiere.length === 0 ||  EvaluationLibreCharge.sousmatiere === undefined}">
                    <select ng-model="evaluationLibre.id_sousmatiere"   ng-disabled=" EvaluationLibreCharge.sousmatiere.length === 0 ||  EvaluationLibreCharge.sousmatiere === undefined" ng-options=" sousmatiere.id as sousmatiere.libelle for sousmatiere in EvaluationLibreCharge.sousmatiere ">
                        <option  value="">[[translate('viescolaire.utils.undersubject')]]
                        </option>
                    </select>
                </label>
            </div>
        </section>

        <div class="separator"/>
        <!-- Compétence évaluée -->
        <section class="row twelve-mobile">
            <div class="three cell addDevoirTable__libelle twelve-mobile">
                <i18n>evaluations.competence.evaluate</i18n>
                <i class="fa fa-asterisk obligatoire"></i>
            </div>

            <div class="inline-block align-center align-top">
                <span class="competence-eval rounded pointer"
                      ng-class="{grey : evaluationLibre.competenceEvaluee.evaluation == -1, red : evaluationLibre.competenceEvaluee.evaluation == 0, orange : evaluationLibre.competenceEvaluee.evaluation == 1, yellow : evaluationLibre.competenceEvaluee.evaluation == 2, green : evaluationLibre.competenceEvaluee.evaluation == 3}"
                      ng-click="switchColor()"
                >
                </span>
            </div>
        </section>


        <div class="separator"/>

        <section class="row twelve-mobile">
            <!-- Période -->
            <div class="three cell addDevoirTable__libelle twelve-mobile">
                <i18n>viescolaire.utils.periode</i18n>
                <i class="fa fa-asterisk obligatoire"></i>
            </div>

            <div class="nine cell twelve-mobile">
                <label class="select four twelve-mobile">
                    <select ng-model="evaluationLibre.id_periode" ng-change="" ng-options="periode.libelle for periode in periodes.all">
                        <option  value="" ng-if = "evaluationLibre.id_periode === undefined || evaluationLibre.id_periode === null || evaluationLibre.id_periode===''">[[translate('viescolaire.utils.periode')]]
                        </option>
                    </select>
                </label>
            </div>
        </section>

        <section class="row twelve-mobile">
            <!-- Date évaluation -->
            <div class="three cell addDevoirTable__libelle twelve-mobile">
                <i18n>evaluations.test.date</i18n>
                <i class="fa fa-asterisk obligatoire"></i>
            </div>

            <div class="nine cell twelve-mobile">
                <date-picker style="margin: 10px 0;" ng-model="evaluationLibre.dateDevoir" class="four" ng-change="showDate = true; controleDate()"></date-picker>
            </div>
        </section>

        <section class="row twelve-mobile">
            <!-- Date publication -->
            <div class="three cell addDevoirTable__libelle twelve-mobile">
                <i18n>evaluations.test.grade.publication.date</i18n>
                <i class="fa fa-asterisk obligatoire"></i>
            </div>

            <div class="nine cell twelve-mobile">
                <date-picker style="margin: 10px 0;" ng-model="evaluationLibre.datePublication" class="four" ng-change="showDate = true; controleDate()"></date-picker>
            </div>
        </section>
        <div class ="twelve cell  height-three" >


            <input class="button-add-devoir bottom-right-magnet" type="button" ng-click="saveNewEvaluationLibre()"
                   ng-disabled="controleNewEvaluationLibreForm()" i18n-value="viescolaire.utils.save">
        </div>
    </div>
</div>