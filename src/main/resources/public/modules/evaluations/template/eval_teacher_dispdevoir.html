<!--
  ~ Copyright (c) Région Hauts-de-France, Département 77, CGI, 2016.
  ~
  ~ This file is part of OPEN ENT NG. OPEN ENT NG is a versatile ENT Project based on the JVM and ENT Core Project.
  ~
  ~ This program is free software; you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation (version 3 of the License).
  ~ For the sake of explanation, any module that communicate over native
  ~ Web protocols, such as HTTP, with OPEN ENT NG is outside the scope of this
  ~ license and could be license under its own terms. This is merely considered
  ~ normal use of OPEN ENT NG, and does not fall under the heading of "covered work".
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  ~
  -->
<div class="row">
    <nav class="twelve cell marginLeftFive nav-devoirs">
        <div class="cell switch-view-buttons">
            <i class="show-list" ng-class="{ selected: template.contains('test', 'list') }"
               ng-click="template.open('test', 'list')"></i>
            <i class="show-icons" ng-class="{ selected: template.contains('test', 'icons') }"
               ng-click="template.open('test', 'icons')"></i>
        </div>
        <button class="marginFive" ng-click="newDevoir(); showNoteLightBox = true">Nouveau devoir </button>
    </nav>
    <div class="twelve cell list-devoirs">

        <div class="two cell criterion-fixed">
            <div style="background: white;padding: 8px;border-radius: 5px;margin: 5px" >
                <header>
                    <h2 style="color: grey;"><i18n>utils.criterion</i18n></h2>
                </header>

                <section>
                    <label class="select">
                        <select ng-model="search.idclasse" style="width: 100%;border: solid 1px;border-radius: 2px;cursor: pointer;background: transparent;" ng-change="setMatieresFilter()">
                            <option class="header-opt" value="*">Classes</option>
                            <option ng-repeat="classe in classes track by $index" value="[[classe.id]]">[[classe.name]]</option>
                        </select>
                    </label>
                </section>

                <section >
                    <label class="select">
                        <select ng-model="search.idmatiere" ng-change="getSousMatieres()"
                                style="width: 100%;border: solid 1px;border-radius: 2px;cursor: pointer;background: transparent;">
                            <option class="header-opt" value="*">Matières</option>
                            <option ng-repeat="matiere in listeDevoirMatieres | unique:'name'" value="[[matiere.id]]">[[matiere.name]]</option>
                        </select>
                    </label>
                </section>

                <section>
                    <label class="select" ng-hide="sousMatieres.length === 0 || sousMatieres === undefined || search.idmatiere === '*'">
                        <select ng-model="search.idsousmatiere"
                                style="width: 100%;border: solid 1px;border-radius: 2px;cursor: pointer;background: transparent;">
                            <option class="header-opt" value="*">Sous matières</option>
                            <option ng-repeat="sousMatiere in sousMatieres" value="[[sousMatiere.id]]">[[sousMatiere.libelle]]</option>
                        </select>
                    </label>
                </section>

                <section>
                    <label class="select">
                        <select ng-model="search.idtype" style="width: 100%;border: solid 1px;border-radius: 2px;cursor: pointer;background: transparent;">
                            <option class="header-opt" value="*">Types de devoirs</option>
                            <option ng-repeat="type in etabTypeDevoir" ng-selected="search.idtype === type.id" value="[[type.id]]">[[type.nom]]</option>
                        </select>
                    </label>
                </section>

                <section>
                    <label class="select">
                        <select ng-model="search.idperiode" style="width: 100%;border: solid 1px;border-radius: 2px;cursor: pointer;background: transparent;">
                            <option class="header-opt" value="*">Périodes</option>
                            <option ng-repeat="periode in periodes" ng-selected="periode.id === search.idperiode" value="[[periode.id]]">[[periode.libelle]]</option>
                        </select>
                    </label>
                </section>

                <section>
                    <p>
                        <b><i18n>test.date</i18n> :</b>
                        <section><i18n>from.date</i18n> <date-picker style="width: 80%;cursor: pointer;" ng-model="date.creation.debut" ng-change="showDate = true;filtrerDevoir();"></date-picker></section>
                        <section><i18n>to.date</i18n> <date-picker style="width: 80%;cursor: pointer;" ng-model="date.creation.fin" ng-change="showDate = true;filtrerDevoir();"></date-picker></section>
                    </p>
                </section>

                <section>
                    <p>
                        <b><i18n>test.date.publication</i18n> :</b>
                        <section><i18n>from.date</i18n> <date-picker style="width: 80%;cursor: pointer;" ng-model="date.publication.debut" ng-change="showDate = true;filtrerDevoir();"></date-picker></section>
                        <section><i18n>to.date</i18n>	<date-picker style="width: 80%;cursor: pointer;" ng-model="date.publication.fin" ng-change="showDate = true;filtrerDevoir();"></date-picker></section>
                    </p>
                </section>
            </div>

        </div>

        <div class="ten cell " style="margin-top: -50px;">
            <button class="marginFive" ng-click="newDevoir(); showNoteLightBox = true">Nouveau devoir </button>
        </div>
        <div class="ten cell fixed-container">
            <div class="marginFive">
                <header class="headerStyle">

                    <h2><i18n>test.owner.list</i18n></h2>
                    <input type="text" ng-model="search.name" placeholder="Filtrer sur le nom..." style="width: 99%;font-size: 1em;font-style: italic;">

                </header>

                <div ng-include="template.containers.test" class="twelve cell toggle-buttons-spacer"></div>

            </div>
        </div>

    </div>
</div>
<section class="toggle-buttons" ng-class="{ hide: selectedDevoirs.length == 0 }">
    <div class="toggle">
        <div class="row">
            <button ng-show="selectedDevoirs.length === 1" class="cell ng-scope" ng-click="alert('Fonctionnalité bientôt disponible')">
                <i18n><span class="no-style">test.edit</span></i18n>
            </button>
            <button class="cell ng-scope" ng-click="alert('Fonctionnalité bientôt disponible')">
                <i18n><span class="no-style">test.duplicate</span></i18n>
            </button>
            <button class="cell ng-scope" ng-click="alert('Fonctionnalité bientôt disponible')">
                <i18n><span class="no-style">test.delete</span></i18n>
            </button>
        </div>
    </div>
</section>
